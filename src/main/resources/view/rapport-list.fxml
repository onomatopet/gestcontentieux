<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.*?>
<?import org.kordamp.ikonli.javafx.*?>

<?import java.net.URL?>
<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.regulation.contentieux.controller.RapportController">
    <top>
        <VBox spacing="15.0" styleClass="header-section">
            <padding>
                <Insets bottom="15.0" left="20.0" right="20.0" top="20.0" />
            </padding>

            <!-- Titre principal -->
            <HBox alignment="CENTER_LEFT" spacing="10.0">
                <Label styleClass="title-large" text="ðŸ“Š GÃ©nÃ©ration des Rapports" />
            </HBox>

            <!-- Description du rapport sÃ©lectionnÃ© -->
            <Label fx:id="descriptionLabel" styleClass="subtitle-text" wrapText="true"
                   text="SÃ©lectionnez un type de rapport pour commencer" />

            <!-- Configuration du rapport -->
            <VBox spacing="15">
                <!-- Type de rapport -->
                <VBox spacing="5">
                    <Label text="Type de rapport:" styleClass="field-label" />
                    <ComboBox fx:id="typeRapportComboBox" prefWidth="400" promptText="SÃ©lectionnez un type de rapport" />
                </VBox>

                <!-- Configuration de la pÃ©riode -->
                <VBox spacing="10">
                    <Label text="PÃ©riode du rapport:" styleClass="section-title" />

                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <ComboBox fx:id="periodeTypeComboBox" prefWidth="200" />

                        <!-- PÃ©riode personnalisÃ©e -->
                        <HBox fx:id="periodePersonnaliseeBox" spacing="10" alignment="CENTER_LEFT">
                            <Label text="Du:" />
                            <DatePicker fx:id="dateDebutPicker" prefWidth="150" />
                            <Label text="Au:" />
                            <DatePicker fx:id="dateFinPicker" prefWidth="150" />
                        </HBox>

                        <!-- PÃ©riode mensuelle (pour future utilisation) -->
                        <HBox fx:id="periodeMensuelleBox" spacing="10" alignment="CENTER_LEFT" visible="false" managed="false">
                            <Label text="Mois:" />
                            <ComboBox fx:id="moisComboBox" prefWidth="150" />
                            <Label text="AnnÃ©e:" />
                            <ComboBox fx:id="anneeComboBox" prefWidth="100" />
                        </HBox>
                    </HBox>
                </VBox>

                <!-- Filtres additionnels -->
                <VBox fx:id="filtresAdditionnelsBox" spacing="10">
                    <Label text="Filtres additionnels:" styleClass="section-title" />

                    <HBox spacing="15">
                        <VBox spacing="5">
                            <Label text="Service:" />
                            <ComboBox fx:id="serviceFilterComboBox" prefWidth="200" promptText="Tous les services" />
                        </VBox>

                        <VBox spacing="5">
                            <Label text="Bureau/Centre:" />
                            <ComboBox fx:id="bureauFilterComboBox" prefWidth="200" promptText="Tous les bureaux" />
                        </VBox>

                        <VBox spacing="5" alignment="CENTER_LEFT">
                            <Label text="Options:" />
                            <CheckBox fx:id="includeDetailsCheckBox" text="Inclure les dÃ©tails" selected="true" />
                        </VBox>
                    </HBox>
                </VBox>

                <!-- Boutons d'action -->
                <HBox spacing="10.0" alignment="CENTER_LEFT">
                    <Button fx:id="genererButton" text="âš™ï¸ GÃ©nÃ©rer le Rapport" styleClass="button-primary" />

                    <Button fx:id="previewButton" text="ðŸ‘ï¸ AperÃ§u" disable="true" />

                    <Button fx:id="imprimerButton" text="ðŸ–¨ï¸ Imprimer" disable="true" />

                    <Button fx:id="exportPdfButton" text="ðŸ“„ Export PDF" disable="true" styleClass="button-danger" />

                    <Button fx:id="exportExcelButton" text="ðŸ“Š Export Excel" disable="true" styleClass="button-success" />

                    <Region HBox.hgrow="ALWAYS" />

                    <ProgressIndicator fx:id="progressIndicator" visible="false" prefWidth="30" prefHeight="30" />
                </HBox>
            </VBox>
        </VBox>
    </top>

    <center>
        <!-- Zone d'aperÃ§u du rapport -->
        <VBox spacing="10" styleClass="content-section">
            <padding>
                <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
            </padding>

            <Label text="AperÃ§u du rapport:" styleClass="section-title" />

            <WebView fx:id="previewWebView" VBox.vgrow="ALWAYS" />
        </VBox>
    </center>

    <!-- SECTION FOOTER COMPLÃˆTE CORRIGÃ‰E: -->
    <bottom>
        <!-- Barre de statut -->
        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="footer-section">
            <padding>
                <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
            </padding>

            <Label text="â„¹ï¸" style="-fx-font-size: 14px;" styleClass="info-icon" />
            <Label fx:id="statusLabel" text="PrÃªt Ã  gÃ©nÃ©rer un rapport" styleClass="footer-text" />

            <Region HBox.hgrow="ALWAYS" />

            <!-- Indicateurs de statut -->
            <HBox spacing="10.0" alignment="CENTER_RIGHT">
                <Label text="8 types de rapports disponibles" styleClass="status-info" />
                <Separator orientation="VERTICAL" />
                <Label text="ðŸ’¾" style="-fx-font-size: 14px;" styleClass="success-icon" />
                <Label text="Base de donnÃ©es connectÃ©e" styleClass="status-connected" />
            </HBox>
        </HBox>
    </bottom>

    <stylesheets>
        <URL value="@../css/application.css" />
    </stylesheets>
</BorderPane>